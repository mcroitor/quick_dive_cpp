# Создание и использование модулей / библиотек

## Цель

Выполнив данное задание, студент ознакомится с особенностями создания библиотек программирования, а также с их использованием.

## Задание

Задание выполняется на основе предыдущей лабораторной работы, в ветке `lab05`.

### Создание ветки lab05

Откройте консольное окно и перейдите в папку `SnakeGame`. Получите последние изменения проекта, выполнив команды:

```bash
# select default branch
git checkout main
# get last changes
git pull
```

Создайте ветку, в которой вы будете выполнять задание:

```bash
# create branch and switch to
git checkout -B lab05
```

### Обновление файла сборки

Определите переменные, в которых будут перечислены все динамические библиотеки, которые будут созданы в рамках данной работы:

```makefile
DLLS=apple.dll board.dll direction.dll point.dll snake.dll
LDFLAGS=-L$(BINDIR) -lapple -lboard -ldirection -lpoint -lsnake
```

Для каждого класса определите данных свою библиотеку. Например, измените компиляцию файла `point.cpp` следующим образом:

```makefile
# Point
point.o:
    $(CC) $(SRCDIR)/point.cpp -o $(OBJDIR)/point.o -c

point.dll:
    $(CC) $(OBJDIR)/point.o -shared -o $(BINDIR)/point.dll
```

Подобным образом определите компиляцию для файлов `apple.cpp`, `board.cpp`, `direction.cpp` и `snake.cpp`. Имейте в виду, что классы `Apple` и `Board` зависят от класса `Point`, а класс `Snake` зависит от классов `Point` и `Apple`.

Перепишите сборку проекта следующим образом:

```makefile
$(APPNAME): game_engine.o painter.o main.o $(DLLS)
    $(CC) -o $(BINDIR)/$(APPNAME) \
        $(OBJDIR)/game_engine.o $(OBJDIR)/painter.o $(OBJDIR)/main.o \
        $(LDFLAGS)
```

### Проверка

Соберите проект:

```bash
make
```

Проверьте наличие всех динамических библиотек и исполняемого файла:

```bash
ls -l bin/*
```

### Фиксирование изменений

Зафиксируйте изменения в локальном репозитории и отправьте их на GitHub:

```bash
git add .
git commit -m "feat(lab05): build dynamic libraries"
git push origin lab05
```

Создайте запрос на включение изменений в основную ветку проекта (Pull Request).

## Представление

Для представления результата прикрепите ссылку на репозиторий GitHub к заданию в Moodle.

## Оценивание

- `3p` - создание библиотек;
- `3p` - использование библиотек;
- `2p` - обновление файла сборки;
- `2p` - защита работы;
- `-1p` - за каждый день просрочки сдачи работы;
- `-5p` - за плагиат.
