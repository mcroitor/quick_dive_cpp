# Хорошие практики программирования

- [Хорошие практики программирования](#хорошие-практики-программирования)
  - [Стиль программирования](#стиль-программирования)
  - [Документирование кода](#документирование-кода)
  - [Тестирование](#тестирование)
  - [Идиомы программирования](#идиомы-программирования)
    - [Базовые идиомы](#базовые-идиомы)
      - [Инкремент и декремент](#инкремент-и-декремент)
      - [Swap](#swap)
    - [RAII](#raii)
    - [Pimpl](#pimpl)
  - [Шаблоны проектирования](#шаблоны-проектирования)
  - [Библиография](#библиография)

## Стиль программирования

## Документирование кода

## Тестирование

## Идиомы программирования

Идиомой программирования называется стандартный способ написания кода, который является наиболее эффективным и удобным для решения определенной задачи. Идиомы программирования обычно являются частью языка программирования и включают в себя стандартные шаблоны, алгоритмы и структуры данных. Идиомы программирования можно назвать низкоуровневыми паттернами проектирования[^1], которые используются для решения конкретных задач.

### Базовые идиомы

#### Инкремент и декремент

Одной из стандартных задач программирования является подсчет (элементов, выполненных операций и т.д.). Стандартное решение этой задачи является введение переменной - счетчика и увеличение (уменьшение) ее значения на единицу. В ряде языков для этого используется форма:

```basic
i = i + 1
```

В `C`-подобных языках для этой задачи используется оператор инкремента `++`:

```cpp
i++;
```

Соответственно, для уменьшения значения переменной используется оператор декремента `--`:

```cpp
i--;
```

#### Swap

Одной из типичных задач программирования является обмен значениями двух переменных. Стандартное решение этой задачи заключается в использовании третьей переменной:

```cpp
template <typename T>
void swap(T& a, T& b) {
    T tmp = a;
    a = b;
    b = tmp;
}
```

Однако, если необходимо обменять значения двух контейнеров, поэлементный обмен значений является неэффективным. Обычно, контейнер содержит в себе указатель на управляемую им память, поэтому обмен указателей является более эффективным решением:

```cpp
template <typename T>
void swap(T* a, T* b) {
    T* tmp = a;
    a = b;
    b = tmp;
}
```

### RAII

RAII (Resource Acquisition Is Initialization) - это идиома программирования, которая заключается в том, что ресурсы должны быть выделены в конструкторе объекта и освобождены в деструкторе. Это позволяет гарантировать, что ресурсы будут освобождены в случае исключения или выхода из блока.

Пример реализации RAII для работы с файлами представлен ниже:

```cpp
class File {
public:
    File(const std::string& filename) : file(fopen(filename.c_str(), "r")) {
        if (!file) {
            throw std::runtime_error("Failed to open file");
        }
    }

    ~File() {
        fclose(file);
    }

    void read() {
        // ...
    }

private:
    FILE* file;
};
```

### Pimpl

Pimpl (Pointer to Implementation) - это идиома программирования, которая заключается в том, что реализация класса выносится в отдельный класс, который хранится в умном указателе в основном классе. Это позволяет скрыть реализацию класса от клиента и уменьшить зависимость между интерфейсом и реализацией.

```cpp
class Widget {
public:
    Widget();
    ~Widget();

    void doSomething();

private:
    class Impl;
    std::unique_ptr<Impl> impl;
};

class Widget::Impl {
public:
    void doSomething() {
        // ...
    }
};

Widget::Widget() : impl(std::make_unique<Impl>()) {}

Widget::~Widget() = default;

void Widget::doSomething() {
    impl->doSomething();
}
```

## Шаблоны проектирования

## Библиография

[^1]: [Паттерны программирования](https://ru.wikipedia.org/wiki/Шаблон_проектирования)
